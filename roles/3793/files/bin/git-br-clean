#!/usr/bin/env runghc

import System.Process ( readCreateProcess, shell )

main :: IO ()
main = do
  sh "git branch --merged | peco | xargs -t -L1 git branch -D"
  sh "git branch -r --merged | perl -p -e 's/^\\s+\\w+\\///g' | peco | xargs -t -L1 git push -d origin"
  sh "git gc --auto"

sh :: String -> IO ()
sh command = do
  putStrLn $ "+" ++ command
  out <- readCreateProcess (shell command) ""
  putStrLn out

-- vim:set ft=haskell:
